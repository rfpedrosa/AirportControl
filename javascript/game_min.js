eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('1 s;1 g;1 y;1 6=2;1 8;1 9;1 a=2;1 b;1 c;1 d;1 e;1 f=3 h();1 i;1 j;1 k;1 l=[];1 m;1 n;1 o;1 p=[];1 q;1 r;1 Q;1 t=[];1 u=v;1 w=x;1 4=z;1 A;1 B=4;1 C;1 D;1 E;1 F=2;1 G=0;1 H;1 I;1 J;1 K;1 L=5;1 M=[];1 N=3 O();P=7;',53,53,'|var|true|new|CREATE_AIRPLANES_DELAY_TIME||audio_playing|300|audio_alarm|audio_explosion|audio_effects_enabled|stage|mouseTarget|dragStarted|startPt|mapIdDisplayObject|context|Object|FIGHTER_AIRPORT|FIGHTER_AIRPORT_BITMAP|FIGHTER_AIRPORT_SHAPE|FIGHTER_AIRPORT_ROUTE|BOMBER_AIRPORT|BOMBER_AIRPORT_BITMAP|BOMBER_AIRPORT_SHAPE|BOMBER_AIRPORT_ROUTE|HELICOPTER_AIRPORT|HELICOPTER_AIRPORT_BITMAP|canvas|HELICOPTER_AIRPORT_ROUTE|TICKS_BEFORE_ACTIVE_START_COUNTER|100|INCREASE_DIFICULTY_DELAY_TIME|45000|audio|7000|last_increase_dificulty_time|last_create_airplanes_delay_time|last_airplane_created|last_nr_airplane_created|factor|isDead|score|messageField1|messageField2|messageField3|scoreField|CLOUDS_NUMBER|clouds|lastTrackBlinkDate|Date|BLINK_TIME|HELICOPTER_AIRPORT_SHAPE'.split('|'),0,{}))
function init(){canvas=document.getElementById("game_canvas");audio=document.getElementById("music");audio_alarm=document.getElementById("alarm");audio_explosion=document.getElementById("explosion");context=canvas.getContext('2d');stage=new Stage(canvas);stage.mouseEnabled=true;stage.enableMouseOver(50);canvas.onmousemove=onMouseMove;canvas.onmousedown=onMouseDown;canvas.onmouseup=onMouseUp;scoreField=new Text("0","bold 18px Arial","#00FF00");scoreField.textAlign="right";scoreField.x=canvas.width-10;scoreField.y=22;messageField1=new Text("Welcome to the Airport Control Game!!","bold 24px Arial","#000000");messageField1.textAlign="center";messageField1.x=300;messageField1.y=canvas.height/2-175;messageField2=new Text("Rules:\n\nDrag and Drop Airplanes in the RIGHT Airport track! \n\n Airplanes must be dropped on the blinking RED BOXES!","bold 20px Arial","#000000");messageField2.textAlign="center";messageField2.x=300;messageField2.y=canvas.height/2-100;messageField3=new Text("Are you ready?!? Click here or press \"Play\" to start","bold 12px Arial","#FF0000");messageField3.textAlign="center";messageField3.x=300;messageField3.y=canvas.height/2+200;watchRestart()}function watchRestart(){FIGHTER_AIRPORT=new Rectangle(500,canvas.height/2+100,32,32);FIGHTER_AIRPORT_SHAPE=new Shape();FIGHTER_AIRPORT_SHAPE.graphics.setStrokeStyle(3,"round","round").beginStroke(Graphics.getRGB(255,0,0,1));FIGHTER_AIRPORT_SHAPE.graphics.rect(FIGHTER_AIRPORT.x,FIGHTER_AIRPORT.y,FIGHTER_AIRPORT.width,FIGHTER_AIRPORT.height);FIGHTER_AIRPORT_SHAPE.graphics.setStrokeStyle(3,"round","round").beginStroke(Graphics.getRGB(255,0,0,1));drawArrowsAroundRectangle(FIGHTER_AIRPORT_SHAPE.graphics,FIGHTER_AIRPORT,true);stage.addChild(FIGHTER_AIRPORT_SHAPE);var a=addAirPlane(0);a.setPosition(50,canvas.height/2+100+16);a.drawRoute(66,canvas.height/2+100+16,516,canvas.height/2+100+16);a.bitmap.rotation=90;stage.addChild(messageField1);stage.addChild(messageField2);stage.addChild(messageField3);var b=new Image();b.src="img/audio/play.png";var c=new Bitmap(b);c.x=canvas.width/2-50;c.y=canvas.height/2+175;stage.addChild(c);drawScoreTable();stage.update();canvas.onclick=PlayButtonHandler}function handleClick(){canvas.onclick=null;stage.removeChild(messageField1);stage.removeChild(messageField2);stage.removeChild(messageField3);restart()}function restart(){mapIdDisplayObject=new Object();clouds.length=0;score=0;stage.removeAllChildren();stage.clear();DrawScenario();scoreField.text=(0).toString();stage.addChild(scoreField);last_increase_dificulty_time=new Date();last_airplane_created=new Date();last_create_airplanes_delay_time=CREATE_AIRPLANES_DELAY_TIME;last_nr_airplane_created=0;factor=0.85;lastTrackBlinkDate=new Date();isDead=false;addAirPlane(0);addAirPlane(TICKS_BEFORE_ACTIVE_START_COUNTER);Ticker.addListener(window)}
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('12=18(){1h();v a=5 C();a.B="A/1k.E";v b=5 F(a);b.Q=0.4;j.i(b);v c=5 C();c.B="A/O/1i.E";w=5 F(c);w.x=M;w.y=W;w.V=1m;j.i(w);r=5 K(14,W,l,l);N.T=0;N.9(5 8(M,S));N.9(5 8(M+10,S));f=5 I();f.7.t(3,"6","6").p(o.n(m,0,0,1));f.7.J(r.x,r.y,r.P,r.L);f.7.t(3,"6","6").p(o.n(m,0,0,1));H(f.7,r,R);f.G=D;j.i(f);v d=5 C();d.B="A/O/1l.E";u=5 F(d);u.x=Z;u.y=U;u.V=11;j.i(u);q=5 K(13,U,l,l);g.T=0;g.9(5 8(15,16));g.9(5 8(17,1n));g.9(5 8(19,1a));g.9(5 8(1b,1c));g.9(5 8(1d,1e));g.9(5 8(1f,1g));k=5 I();k.7.t(3,"6","6").p(o.n(m,0,0,1));k.7.J(q.x,q.y,q.P,q.L);k.7.t(3,"6","6").p(o.n(m,0,0,1));H(k.7,q,R);k.G=D;j.i(k);v e=5 C();e.B="A/O/1j.E";z=5 F(e);z.Q=0.2;z.x=X;z.y=Y;j.i(z);s=5 K(X,Y,l,l);h=5 I();h.7.t(3,"6","6").p(o.n(m,0,0,1));h.7.J(s.x,s.y,s.P,s.L);h.7.t(3,"6","6").p(o.n(m,0,0,1));H(h.7,s,D);h.G=D;j.i(h)}',62,86,'|||||new|round|graphics|Point|push||||||FIGHTER_AIRPORT_SHAPE|BOMBER_AIRPORT_ROUTE|HELICOPTER_AIRPORT_SHAPE|addChild|stage|BOMBER_AIRPORT_SHAPE|32|255|getRGB|Graphics|beginStroke|BOMBER_AIRPORT|FIGHTER_AIRPORT|HELICOPTER_AIRPORT|setStrokeStyle|BOMBER_AIRPORT_BITMAP|var|FIGHTER_AIRPORT_BITMAP|||HELICOPTER_AIRPORT_BITMAP|img|src|Image|false|png|Bitmap|visible|drawArrowsAroundRectangle|Shape|rect|Rectangle|height|375|FIGHTER_AIRPORT_ROUTE|airplanes|width|alpha|true|164|length|295|rotation|150|765|310|520|400|65|DrawScenario|500|343|523|306|545|function|570|286|600|276|650|252|750|239|CreateClouds|fighter_white|helicopter_white|stage_backgroundv11|bomber_white|90|300'.split('|'),0,{}))
CreateClouds=function(){for(var i=0;i<CLOUDS_NUMBER;i++){clouds.push([Math.random()*canvas.width,Math.random()*canvas.height,Math.random()*100,Math.random()/2])}}
MoveClouds=function(a){for(var i=0;i<CLOUDS_NUMBER;i++){if(clouds[i][0]-clouds[i][2]>canvas.width){clouds[i][2]=Math.random()*100;clouds[i][0]=0-clouds[i][2];clouds[i][1]=Math.random()*canvas.height;clouds[i][3]=Math.random()/2}else{clouds[i][0]+=a}}DrawClouds()}
DrawClouds=function(){for(var i=0;i<CLOUDS_NUMBER;i++){context.fillStyle='rgba(255, 255, 255, '+clouds[i][3]+')';context.beginPath();context.arc(clouds[i][0]-clouds[i][2],clouds[i][1],clouds[i][2],0,Math.PI,true);context.arc(clouds[i][0],clouds[i][1],clouds[i][2]/2,0,Math.PI,true);context.arc(clouds[i][0]+clouds[i][2]/2,clouds[i][1],clouds[i][2]/4,0,Math.PI,true);context.closePath();context.fill()}}
function addAirPlane(a){var p=getAvailableStartPosition();if(!p){return null}var b=Math.floor(Math.random()*3)+1;var c=new AirPlane(b,a,canvas.width,canvas.height);c.setPosition(p.x,p.y);c.bitmap.mouseEnabled=true;c.bitmap.onMouseOver=onMouseOver;c.bitmap.onMouseOut=onMouseOut;mapIdDisplayObject[c.id]=c;stage.addChild(c);return c}function getAvailableStartPosition(){for(i=0;i<100;i++){var v=Math.random();var x;var y;if(v>0.5){x=Math.round(canvas.width*Math.random());y=Math.round(Math.random())*canvas.height}else{x=Math.round(Math.random())*canvas.width;y=Math.round(canvas.height*Math.random())}if(x==0){x=16}if(x==canvas.width){x=canvas.width-16}if(y==0){y=16}if(y==canvas.height){y=canvas.height-16}var a=true;for(id in mapIdDisplayObject){var b=mapIdDisplayObject[id];if(b.hitRadius(x,y,b.hit*4)){a=false;break}}if(a){return new Point(x,y)}}return null}
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('16 1e(){2(14){15.P()}2((19)&&(8)){6 a=8.17.18(o.1b,o.1c);8.11(v.x,v.y,a.x,a.y);v=a;6 b=T K();2(b.r()-J.r()>Z){2(8.i==j.D){p.3=!p.3;H.3=p.3}7 2(8.i==j.L){t.3=!t.3;E.3=t.3}7 2(8.i==j.G){q.3=!q.3;I.3=q.3}J=b}}7{p.3=m;t.3=m;q.3=m;H.3=k;E.3=k;I.3=k}6 c=k;M(O S n){6 d=n[O];2(d==8){A}d.12();2(d.B){6 e=m;M(X S n){6 f=n[X];2((d==f)||(!f.B)){A}2(d.F(f.s.x,f.s.y,f.l)){d.u(f.l*4);f.u(f.l*4);1j(d,f);1l}7 2(d.F(f.s.x,f.s.y,f.l*4)){e=k}}2(e){d.Y()}7{d.u(f.l*4);c=m}6 g=d.10(1);6 h=13;2(g.N!=0){h=g[0]}2((d.i==j.D)&&(d.9(Q))&&(d.R)&&((!h)||(9(h.x,h.y,Q)))){d.w(1a);z(1)}7 2((d.i==j.L)&&(d.9(U))&&(d.R)&&((!h)||(9(h.x,h.y,U)))){d.w(1d);z(1)}7 2((d.i==j.G)&&(d.9(V))&&((!h)||(9(h.x,h.y,V)))){d.w(1f);z(1)}}2(d.1g){o.1h(d)}}2(c&&1i){W.P()}7{W.1k()}b=T K();2((b.r()-C.r()>1m)||(n.N==0)){1n(1o);C=b}o.1p();1q(5)}',62,89,'||if|visible|||var|else|mouseTarget|hitRectangle|||||||||type|AirPlane|false|hit|true|mapIdDisplayObject|stage|FIGHTER_AIRPORT_BITMAP|HELICOPTER_AIRPORT_BITMAP|getTime|bitmap|BOMBER_AIRPORT_BITMAP|changeToWarningMode|startPt|land|||increaseScore|continue|isActive|last_airplane_created|FIGHTER|BOMBER_AIRPORT_SHAPE|hitRadius|HELICOPTER|FIGHTER_AIRPORT_SHAPE|HELICOPTER_AIRPORT_SHAPE|lastTrackBlinkDate|Date|BOMBER|for|length|id|play|FIGHTER_AIRPORT|isAirportRouteTraced|in|new|BOMBER_AIRPORT|HELICOPTER_AIRPORT|audio_alarm|otherId|changeToNormalMode|BLINK_TIME|getLastPositions|drawRoute|move|null|audio_playing|audio|function|routeShape|globalToLocal|dragStarted|FIGHTER_AIRPORT_ROUTE|mouseX|mouseY|BOMBER_AIRPORT_ROUTE|tick|HELICOPTER_AIRPORT_ROUTE|isToDelete|removeChild|audio_effects_enabled|GameOver|pause|return|last_create_airplanes_delay_time|addAirPlane|TICKS_BEFORE_ACTIVE_START_COUNTER|update|MoveClouds'.split('|'),0,{}))         
function increaseScore(a){score+=a;var b=CREATE_AIRPLANES_DELAY_TIME*Math.pow(0.95,Math.floor(Math.sqrt(score)));last_create_airplanes_delay_time=Math.round((Math.random()+0.5)*b);scoreField.text=score.toString()}function GameOver(a,b){audio_alarm.pause();a.explode();b.explode();if(audio_effects_enabled){audio_explosion.play()}isDead=true;var c=document.getElementById("img_play");c.src="img/audio/play.png";c.title="Play";messageField1.text="Game Over. Your score is...  "+score+"!";messageField1.color="#FF0000";messageField1.font="bold 24px Arial";if(score==0){messageField2.text="\n Drag and drop airplanes in the RED BOXES.\n They flashes after selecting an airplane!"}else if(score<50){messageField2.text="\n Tip: Try to define common routes for each airplane type."}else if(score<100){messageField2.text="\n Great result! Keep going..."}else if(score<200){messageField2.text="\n Beautiful! In which airport are you working?!? :)"}else{messageField2.text="\n Uauu! Amazing result! You are a pro..."}messageField3.text="Press \"Play\" to start a new game!";stage.addChild(messageField1);stage.addChild(messageField2);stage.addChild(messageField3);stage.update();Ticker.removeListener(window);drawScoreTable();stage.update();publish_Results(score)}isAlignWithTrack=function(a){var b=5;var c=a.getLastPositions(b);if(c.length<b){return false}var d=0;var e=c.pop();for(var i=0;i<b-1;i++){var f=c.pop();if(e.x-f.x<0){return false}else{d+=e.x-f.x}e=f}if(d<2){return false}return true}
function onMouseMove(e){if(!e){e=window.event}if((dragStarted)&&(mouseTarget)){mouseTarget.addRoutePoint(stage.mouseX,stage.mouseY);if((mouseTarget.type==AirPlane.FIGHTER)&&(hitRectangle(stage.mouseX,stage.mouseY,FIGHTER_AIRPORT))&&(isAlignWithTrack(mouseTarget))){mouseTarget.setAirportRouteTraced(true)}else if((mouseTarget.type==AirPlane.BOMBER)&&(hitRectangle(stage.mouseX,stage.mouseY,BOMBER_AIRPORT))&&(isAlignWithTrack(mouseTarget))){mouseTarget.setAirportRouteTraced(true)}else if((mouseTarget.type==AirPlane.HELICOPTER)&&(hitRectangle(stage.mouseX,stage.mouseY,HELICOPTER_AIRPORT))){mouseTarget.setAirportRouteTraced(true)}else{mouseTarget.setAirportRouteTraced(false)}}}function onMouseDown(e){if(!e){e=window.event}if(!mouseTarget){onMouseOver(e)}if((mouseTarget)&&(mouseTarget.isActive)){dragStarted=true;mouseTarget.clearRoute();mouseTarget.setAirportRouteTraced(false);startPt=mouseTarget.routeShape.globalToLocal(stage.mouseX,stage.mouseY);mouseTarget.addRoutePoint(startPt.x,startPt.y)}}function onMouseUp(e){dragStarted=false;if(mouseTarget){onMouseOut(e)}}function onMouseOver(e){if(!e){e=window.event}if(!dragStarted){try{var a=stage.getObjectUnderPoint(e.stageX,e.stageY)}catch(exception){}if((a)&&(a.parent.isActive)){mouseTarget=a.parent;mouseTarget.mouseOver()}}}function onMouseOut(e){if(!e){e=window.event}if(!dragStarted&&mouseTarget){mouseTarget.mouseOut();mouseTarget=null}}function PlayButtonHandler(){var a=document.getElementById("img_play");if(isDead){handleClick();a.src="img/audio/pause.png";a.title="Pause"}else if(Ticker.getPaused()){Ticker.setPaused(false);a.src="img/audio/pause.png";a.title="Pause"}else if(!Ticker.getPaused()){Ticker.setPaused(true);a.src="img/audio/play.png";a.title="Play"}}function AudioButtonHandler(){var a=document.getElementById("img_audio");audio_playing=!audio_playing;if(audio_playing){a.src="img/audio/audio_on.png";a.title="Audio enabled";audio.play()}else{a.src="img/audio/audio_off.png";a.title="Audio disable";audio.pause()}}function AudioEffectsButtonHandler(){var a=document.getElementById("audio_effects");audio_effects_enabled=a.checked}function ChangeSpeedButtonHandler(){var a=document.getElementById("img_speed");if(Ticker.getInterval()==50){a.src="img/audio/rewind.png";a.title="Decrease Speed";Ticker.setInterval(25)}else{a.src="img/audio/forward.png";a.title="Increase Speed";Ticker.setInterval(50)}}